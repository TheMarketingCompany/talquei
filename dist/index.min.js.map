{"version":3,"file":"index.min.js","sources":["../src/utils/v-nodes.js","../src/utils/input-form.js","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../src/utils/scroll-down.js","../src/index.js"],"sourcesContent":["export default {\n  functional: true,\n\n  props: {\n    vnodes: {\n      type: [Array, Object],\n      required: true,\n    },\n  },\n\n  render: (h, { props }) => {\n    const nodes = props.vnodes\n    if (Array.isArray(nodes)) {\n      return nodes\n    }\n    return h(nodes)\n  },\n}\n","export default (ctx, options, model) => {\n  if (!['text', 'select'].includes(options.tag)) {\n    throw new Error('[talquei] Invalid input type')\n  }\n\n  if (options.tag === 'select') {\n    if (!options.options) {\n      throw new Error('[talquei] You must pass some items to select')\n    }\n  }\n\n  const emit = value => {\n    ctx.$_next()\n    ctx.$emit(model.event, value)\n  }\n\n  return {\n    name: 'InputForm',\n    directives: {\n      focus: {\n        inserted: (el) => el.focus(),\n      },\n    },\n\n    render (h) {\n      let inputEl\n\n      const sendIcon = h('svg', {\n        attrs: {\n          xmlns: 'http://www.w3.org/2000/svg',\n          viewBox: '0 0 512 512',\n          width: '16px',\n          height: '16px',\n          fill: 'currentColor',\n        },\n      }, [h('path', {\n        attrs: {\n          d: 'M277.375 427V167.296l119.702 119.702L427 256 256 85 85 256l29.924 29.922 119.701-118.626V427h42.75z',\n        },\n      })])\n\n      const submitButton = cb => h('button', {\n        class: 'talquei-form__submit',\n        attrs: {\n          type: 'submit',\n        },\n        on: {\n          click: () => emit(cb()),\n        },\n      }, ctx.$_submitSlot ? ctx.$_submitSlot : [sendIcon])\n\n      if (options.tag === 'text') {\n        const { tag, ...attributes } = options\n\n        inputEl = [\n          h('input', {\n            class: ['talquei-form__text'],\n            attrs: {\n              type: 'text',\n              ...attributes,\n            },\n            ref: 'text',\n            directives: [{ name: 'focus' }],\n          }),\n          submitButton(() => this.$refs.text.value),\n        ]\n      } else if (options.tag === 'select') {\n        const itemsKeys = Object.keys(options.options)\n        inputEl = [h('div', {\n          class: ['talquei-form__select'],\n        },\n        itemsKeys.map((key, index) =>\n          h('button', {\n            attrs: {\n              type: 'button',\n            },\n            class: 'talquei-form__select__item',\n            on: {\n              click: () => emit(options.options[key]),\n            },\n            directives: [index === 0 ? { name: 'focus' } : {}], // focus first item\n          }, options.options[key])\n        )\n        )]\n      }\n\n      return h('form', {\n        class: 'talquei-form',\n        on: {\n          submit: (evt) => {\n            evt.preventDefault()\n            evt.stopPropagation()\n          },\n        },\n      }, inputEl)\n    },\n  }\n}\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","/**\n* Based from theomessin/vue-chat-scroll with some changes\n* MIT - Theodore Messinezis <theo@theomessin.com>\n*/\n\nconst scrollToBottom = (el, smooth) => {\n  if (typeof el.scroll === 'function') {\n    el.scroll({\n      top: el.scrollHeight,\n      behavior: smooth ? 'smooth' : 'instant',\n    })\n  } else {\n    el.scrollTop = el.scrollHeight\n  }\n}\n\nexport default {\n  bind: (el, binding) => {\n    let scrolled = false\n\n    if (el.addEventListener) {\n      el.addEventListener('scroll', () => {\n        scrolled = el.scrollTop + el.clientHeight + 1 < el.scrollHeight\n      })\n    }\n\n    (new MutationObserver(e => {\n      const config = binding.value || {}\n      const pause = config.always === false && scrolled\n      if (pause || e[e.length - 1].addedNodes.length !== 1) return\n      scrollToBottom(el, config.smooth)\n    })).observe(el, { childList: true, subtree: true })\n  },\n\n  inserted: scrollToBottom,\n}\n\nexport {\n  scrollToBottom,\n}\n","import Talquei from './components/Talquei.vue'\nimport TalqueiMessage from './components/TalqueiMessage.vue'\nimport './styles/style.css'\n\nfunction install (Vue) {\n  Vue.component(Talquei.name, Talquei)\n  Vue.component(TalqueiMessage.name, TalqueiMessage)\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(install)\n}\n\nexport default install\nexport {\n  Talquei,\n  TalqueiMessage,\n}\n"],"names":["functional","props","vnodes","type","Array","Object","required","render","h","nodes","isArray","ctx","options","model","includes","tag","Error","emit","value","$_next","$emit","event","name","directives","focus","inserted","el","inputEl","sendIcon","attrs","xmlns","viewBox","width","height","fill","d","attributes","class","ref","cb","this","$refs","text","on","click","$_submitSlot","itemsKeys","keys","map","key","index","submit","evt","preventDefault","stopPropagation","normalizeComponent","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","staticRenderFns","_compiled","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","existing","beforeCreate","concat","scrollToBottom","smooth","scroll","top","scrollHeight","behavior","scrollTop","bind","binding","scrolled","addEventListener","clientHeight","MutationObserver","e","config","always","length","addedNodes","observe","childList","subtree","install","Vue","component","Talquei","TalqueiMessage","window","use"],"mappings":"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"}